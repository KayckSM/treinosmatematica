<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Treino de MatemÃ¡tica</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 40px;
        }
        h1 {
            margin-bottom: 10px;
        }
        .modos {
            margin-bottom: 20px;
        }
        .conta {
            font-size: 32px;
            margin: 20px 0;
        }
        input {
            font-size: 18px;
            padding: 5px;
            width: 100px;
            text-align: center;
        }
        button {
            font-size: 16px;
            padding: 6px 12px;
            margin: 5px;
        }
        .mensagem {
            margin-top: 15px;
            font-size: 18px;
        }
    </style>
</head>
<body>

    <h1>Treino de MatemÃ¡tica</h1>

    <div class="modos">
        <label><input type="radio" name="modo" value="tabuadaSeq" checked> Tabuada Sequencial</label><br>
        <label><input type="radio" name="modo" value="tabuadaRand"> Tabuada AleatÃ³ria</label><br>
        <label><input type="radio" name="modo" value="soma"> Treino de Soma</label><br>
        <label><input type="radio" name="modo" value="subtracao"> Treino de SubtraÃ§Ã£o</label><br><br>
        <button onclick="iniciar()">Iniciar</button>
    </div>

    <div class="conta" id="conta"></div>

    <input type="number" id="resposta" placeholder="Resposta">
    <button onclick="verificar()">OK</button>

    <div class="mensagem" id="mensagem"></div>

    <script>
        let modo = "tabuadaSeq";
        let a = 1;
        let b = 1;
        let operacao = "Ã—";

        const contaEl = document.getElementById("conta");
        const respostaEl = document.getElementById("resposta");
        const mensagemEl = document.getElementById("mensagem");

        function iniciar() {
            modo = document.querySelector('input[name="modo"]:checked').value;
            a = 1;
            b = 1;
            respostaEl.style.display = "inline-block";
            mostrarConta();
        }

        function gerarNumero(max) {
            return Math.floor(Math.random() * (max + 1));
        }

        function mostrarConta() {
            mensagemEl.textContent = "";
            respostaEl.value = "";
            respostaEl.focus();

            if (modo === "tabuadaSeq") {
                operacao = "Ã—";
            }

            if (modo === "tabuadaRand") {
                operacao = "Ã—";
                a = gerarNumero(8) + 1;
                b = gerarNumero(8) + 1;
            }

            if (modo === "soma") {
                operacao = "+";
                a = gerarNumero(9999);
                b = gerarNumero(9999);
            }

            if (modo === "subtracao") {
                operacao = "âˆ’";
                a = gerarNumero(9999);
                b = gerarNumero(9999);
                if (b > a) {
                    [a, b] = [b, a]; // garante resultado nÃ£o negativo
                }
            }

            contaEl.textContent = `${a} ${operacao} ${b} = ?`;
        }

        function verificar() {
            const resposta = Number(respostaEl.value);
            let correto;

            switch (operacao) {
                case "Ã—": correto = a * b; break;
                case "+": correto = a + b; break;
                case "âˆ’": correto = a - b; break;
            }

            if (resposta === correto) {
                mensagemEl.textContent = "âœ… Correto!";
                if (modo === "tabuadaSeq") {
                    proximaSequencia();
                } else {
                    setTimeout(mostrarConta, 600);
                }
            } else {
                mensagemEl.textContent = "âŒ Errado, tente novamente.";
            }
        }

        function proximaSequencia() {
            b++;
            if (b > 9) {
                b = 1;
                a++;
            }

            if (a > 9) {
                contaEl.textContent = "ðŸŽ‰ VocÃª concluiu a tabuada!";
                respostaEl.style.display = "none";
                return;
            }

            setTimeout(mostrarConta, 600);
        }

        // ENTER envia a resposta
        respostaEl.addEventListener("keydown", function (event) {
            if (event.key === "Enter") {
                verificar();
            }
        });
    </script>

</body>
</html>
